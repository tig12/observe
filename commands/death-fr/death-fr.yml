
#
# 1 - variables used in several commands
#
variables:
  
  # Contains all intermediate files of this study
  working-dir:  var/studies/death-fr
  
  # Contains the final documents generated by the program
  out-dir: &out-dir  output/studies/death-fr
  
  # Path to the sqlite database containing the data coming fro data.gouv.fr
  sqlite-death-fr: var/studies/death-fr/death-fr.sqlite3
  
  # list of planets involved in this study
  planets: &planets [SO, MO, ME, VE, MA, JU, SA, UR, NE, PL, NN]
  
  # possible-splits
  possible-splits:
    - all           # contains the full dataset
    - death-age     # dataset split by age at death - age limits are defined in observe\commands\studies\deathfr\split
  #
  #
  #
  study: &study
    type: BD
    slug: death-fr
    'N': 28755067 # N without quote is interpreted as 0
    title: 'Death in France (1970 - 2025)'
    subtitle: 
    description: Tests involving birth and death dates
    intro: |
      toto l'intro
    origin: |
      Data coming from https://www.data.gouv.fr/datasets/fichier-des-personnes-decedees.
      Uses a local sqlite database generated by g5 program (https://tig12.github.io/g5) - See src/commands/enrich/deathfr in g5 code.

#
# 2 - commands
#

all:
  command: chain
  commands:
    - distrib-aspects

# Computes a "split" containing the full data set
# --------------------------------------------------------------------------
split-all:
  command: studies.deathfr.split
  split: all
  # Splits are generated in working-dir/out-subdir
  out-subdir: all/data

# Split by age
# --------------------------------------------------------------------------
split-age:
  command: studies.deathfr.split
  split: death-age
  # Splits are generated in working-dir/out-subdir
  out-subdir: split-death-age/data
  
# Computes the aspects between planets at birth and planets at death for split "all"
# --------------------------------------------------------------------------
distrib-aspect-all:
  command: studies.deathfr.aspects
  split: all
  # Aspects are generated in working-dir/out-subdir
  out-subdir: all/distrib-aspects

# Computes the aspects between planets at birth and planets at death for split "death-age"
# --------------------------------------------------------------------------
distrib-aspect-age:
  command: studies.deathfr.aspects
  split: death-age
  # Aspects are generated in working-dir/out-subdir
  out-subdir: split-age/distrib-aspects
  