
#
# 1 - variables used in several commands
#
variables:
  # work-dir Contains all intermediate file
  work-dir: &work-dir  var/studies/death-fr
  # out-dir contains the final documents generated by the program
  out-dir: &out-dir  output/studies/death-fr
  # sqlite-file is the path to the sqlite database containing the data coming fro data.gouv.fr
  sqlite-death-fr: &sqlite-death-fr var/studies/death-fr/death-fr.sqlite3
  # list of planets involved in this study
  planets: &planets [SO, MO, ME, VE, MA, JU, SA, UR, NE, PL, NN]
  #
  study: &study
    type: BD
    slug: death-fr
    'N': 28755067 # N without quote is interpreted as 0
    title: 'Death in France (1970 - 2025)'
    subtitle: 
    description: Tests involving birth and death dates
    intro: |
      toto l'intro
    origin: |
      Data coming from https://www.data.gouv.fr/datasets/fichier-des-personnes-decedees.
      Uses a local sqlite database generated by g5 program (https://tig12.github.io/g5) - See src/commands/enrich/deathfr in g5 code.

#
# 2 - commands
#

all:
  command: chain
  commands:
    - distrib-aspects


# Computes the aspects between planets at birth and planets at death
# --------------------------------------------------------------------------
distrib-aspects:
  command: studies.deathfr.aspects
  # Aspects are generated in work-dir/out-subdir
  work-dir: *work-dir
  out-subdir: aspects
  sqlite-death-fr: *sqlite-death-fr
  planets: *planets