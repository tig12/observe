<!DOCTYPE html>
<html lang="fr" lang="en">
<head>
    <meta charset="utf-8">
    <title>Mother Father Child | Observe software</title>
    <link href="static/css/observe-data.css" rel="stylesheet" type="text/css">
    <meta name="description" content="">
    <meta name="robots" content="index,follow">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.rights" content="Creative commons by-sa 4.0">
    <meta name="dcterms.rightsHolder" content="Thierry Graff">
    <meta name="dcterms.dateCopyrighted" content="2020">
</head>

<body>
<div class="container">

<div class="main">

<a name="topage"></a>
<header>
<h1>
Mother Father Child
</h1>
<div class="intro">
This page describes experiences done on files containing birth dates of mother, father, child.
</div>
</header>

<article>


<!-- ********************************************************************************* -->
<h2>a00.csv - Births of 2000 in France</h2>

Contains all births in France of year 2000
<br><div class="big bold">N = 591 936</div>
Each line contains untimed birth days of mother, father and child, date of mariage.
<br>Working directory is <a href="https://g5.tig12.net/observe/a00">https://g5.tig12.net/observe/a00</a>
<br>Genrated graphics are in <a href="https://g5.tig12.net/observe/a00/a00-html/">https://g5.tig12.net/observe/a00/a00-html/</a>

<br><br>Commands to execute all steps :
<pre>
php run-observe.php insee/a00 convert
php run-observe.php insee/a00 planets
php run-observe.php insee/a00 aspects
php run-observe.php insee/a00 group
php run-observe.php insee/a00 view
</pre>

<!-- ************************************* -->
<h3>Command file</h3>
The command file is <code>commands/insee/a00.yml</code>

<pre>
convert:
  command: convertFile
  input-file: data/a00.csv
  actions:
    - ymd2iso anais00 mnais00 jnais00 -> C
    - ymd2iso ANAISM MNAISM JNAISM    -> M
    - ymd2iso ANAISP MNAISP JNAISP    -> F
  output-file: tmp/a00-ymd.csv

planets:
  command: computeAstro
  input-file: tmp/a00/a00-ymd.csv
  actions:
    - planets C SO MO ME VE MA JU SA UR NE PL NN
    - planets M SO MO ME VE MA JU SA UR NE PL NN
    - planets F SO MO ME VE MA JU SA UR NE PL NN
  output-file: tmp/a00/a00-coords.csv

aspects:
  command: aspects
  input-file: tmp/a00/a00-coords.csv
  actions:
    - C-* M-*
    - C-* F-*
    - M-* F-*
  output-file: tmp/a00/a00-aspects.csv

group:
  command: groupByNumber
  input-file: tmp/a00/a00-aspects.csv
  cols: '*'
  range: 360
  output-dir: tmp/a00/a00-aspects

view:
    command: view\pages
    input-dir: tmp/a00/a00-aspects
    output-dir: tmp/a00/a00-html
    view:
      command: view\bar
      assoc: false
      col: 1
    pages:
      -
        title: a00 Mother Child aspects
        input-files: C-*--M-*.csv
        #subtitle-template: '{IAA($1)} child - {IAA($2)} mother'
        output-file: mother-child.html
      -
        title: a00 Father Child aspects
        input-files: C-*--F-*.csv
        #subtitle-template: '{IAA($1)} child - {IAA($2)} father'
        output-file: father-child.html
      -
        title: a00 Mother Father aspects
        input-files: M-*--F-*.csv
        #subtitle-template: '{IAA($1)} mother - {IAA($2)} father'
        output-file: mother-father.html
</pre>

<!-- ********************************************************************************* -->
<h2>Gauquelin heredity data</h2>

The file used comes from <a href="https://newalchemypress.com/gauquelin/research7.php">newalchemypress.com</a> :
<br><a href="https://newalchemypress.com/gauquelin/gauquelin_docs/mom_dad_kid_final20916_3a-m_column_first.pdf">https://newalchemypress.com/gauquelin/gauquelin_docs/mom_dad_kid_final20916_3a-m_column_first.pdf</a>

<br><br>Contains Gauquelin heredity data
<br><div class="big bold">N = 20 916</div>

The pdf was first converted to a csv :

<ul class="spaced margin-top">
    <li>
        Convert the PDF to text :
        <pre>pdftotext -layout mom_dad_kid_final20916_3a-m_column_first.pdf tmp1.txt</pre>
    </li>
    <li>
        Edit <code>tmp1.txt</code>, and manually find and replace : one special character is replaced by nothing.
        <br>Also had to correct ~20 lines not formatted correctly (newlines and some months and years not separated by space).
    </li>
    <li>The following command generates the csv :
        <br>- Remove white lines
        <br>- Remove useless lines (footer containing the url of the file)
        <br>- Change strings like '48N 5' to '48N05'
        <br>- Convert multiple spaces to one space
        <br>- Convert spaces to semicolon (;)
        <br>- Generate a csv file :
        <pre>
grep -v -e '^$' tmp1.txt | \
grep -v 'file:///' | \
sed -e 's#\([0-9][NSEW]\) \([0-9]\)#\10\2#g' | \
tr -s '[:space:]' | \
sed -e 's/^ //g' | \
sed -e 's/ /;/g' \
> 20916-mfc-newalch.csv</pre>
    </li>
</ul>





</article>
</div><!-- end class="main" -->


<!-- ************************************* -->
<aside class="left">
<a name="topage"></a>
<!-- TODO see why font-family:DejaVu,serif; not inherited from .prevnext -->
<nav class="prevnext" style="font-family:DejaVu,serif;">
    <a class="topage" rel="" href="#topage">&#10148;</a>
    <a class="top" href="index.html">&uarr;</a>
    <!-- 
    <a class="prev" rel="prev" href=".html">&larr;</a>
    <a class="next" rel="next" href=".html">&rarr;</a>
    -->
</nav>

<ul>
    <li class="bold big2"><a href="index.html">Home</a></li>
    
    <li>
        <div class="bold big1 padding-top05">Commands</div>
        <ul>
            <li><a href="cmd-groupByNumber.html">groupByNumber</a></li>
        </ul>
    </li>
    
    <li>
        <div class="bold big1 padding-top05">Experiences</div>
        <ul>
            <li><a href="exp-mfc.html">Mother Father Child</a></li>
        </ul>
    </li>
    
    <li class="bold big1 margin-top"><a href="https://github.com/tig12/observe-data">Code repository</a></li>
</ul>
</aside>

</div><!-- end class="container" -->

</body>
</html>
